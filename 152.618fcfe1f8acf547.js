"use strict";(self.webpackChunkmy_ng3=self.webpackChunkmy_ng3||[]).push([[152],{3152:(He,j,m)=>{m.r(j),m.d(j,{GoogleModule:()=>Xe});var h=m(9808),C=m(6010),e=m(7587),w=m(1135),se=m(4671),L=m(4482),I=m(5403);function le(n,r){return n===r}var ce=m(2076),_=m(4004),ue=m(7579),pe=m(6063);class me extends ue.x{constructor(r=1/0,t=1/0,o=pe.l){super(),this._bufferSize=r,this._windowTime=t,this._timestampProvider=o,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,r),this._windowTime=Math.max(1,t)}next(r){const{isStopped:t,_buffer:o,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:a}=this;t||(o.push(r),!i&&o.push(s.now()+a)),this._trimBuffer(),super.next(r)}_subscribe(r){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(r),{_infiniteTimeWindow:o,_buffer:i}=this,s=i.slice();for(let a=0;a<s.length&&!r.closed;a+=o?1:2)r.next(s[a]);return this._checkFinalizedStatuses(r),t}_trimBuffer(){const{_bufferSize:r,_timestampProvider:t,_buffer:o,_infiniteTimeWindow:i}=this,s=(i?1:2)*r;if(r<1/0&&s<o.length&&o.splice(0,o.length-s),!i){const a=t.now();let c=0;for(let p=1;p<o.length&&o[p]<=a;p+=2)c=p;c&&o.splice(0,c+1)}}}var ge=m(3099),T=m(9646),b=m(262),Z=m(3900),d=m(8971);function J(n,r,t,o,i,s,a){try{var c=n[s](a),p=c.value}catch(l){return void t(l)}c.done?r(p):Promise.resolve(p).then(o,i)}function de(n){return function(){var r=this,t=arguments;return new Promise(function(o,i){var s=n.apply(r,t);function a(p){J(s,o,i,a,c,"next",p)}function c(p){J(s,o,i,a,c,"throw",p)}a(void 0)})}}var he=m(8505);function R(n){const r=new Uint32Array(n/2);return crypto.getRandomValues(r),Array.from(r,t=>("0"+t.toString(16)).slice(-2)).join("")}function k(){return(k=de(function*(n){const t=(new TextEncoder).encode(n);return crypto.subtle.digest("SHA-256",t)})).apply(this,arguments)}function Q(n){return`${n.getFullYear()}-${("00"+(n.getMonth()+1)).slice(-2)}-${("00"+n.getDate()).slice(-2)}T${("00"+n.getHours()).slice(-2)}:${("00"+n.getMinutes()).slice(-2)}:${("00"+n.getSeconds()).slice(-2)}`}function D(n,r){return function(t){const o=new w.X(n);return t.pipe((0,he.b)(()=>o.next(n)),(0,Z.w)(r),function _e(n,r=!1){return(0,L.e)((t,o)=>{let i=0;t.subscribe(new I.Q(o,s=>{const a=n(s,i++);(a||r)&&o.next(s),!a&&o.complete()}))})}(()=>o.observed)).subscribe({next:s=>o.next(s),error:s=>o.error(s),complete:()=>o.complete()}),o.asObservable()}}var M=m(520);const S="google-token",Y="google-code-verifier",$="google-security-token",z="https://oauth2.googleapis.com/token";let P=(()=>{class n{constructor(t,o,i){this.configuration=t,this.http=o,this.router=i,this.tokenReadySubject=new w.X(null),this.tokenData=null,this.tokenReady$=this.tokenReadySubject.asObservable().pipe(function ae(n,r=se.y){return n=null!=n?n:le,(0,L.e)((t,o)=>{let i,s=!0;t.subscribe(new I.Q(o,a=>{const c=r(a);(s||!n(i,c))&&(s=!1,i=c,o.next(a))}))})}());const s=localStorage.getItem(S);s&&(this.tokenData=JSON.parse(s)),this.codeVerifier=R(56),this.codeChallenge$=(0,ce.D)(function Ce(n){return k.apply(this,arguments)}(this.codeVerifier)).pipe((0,_.U)(a=>function ye(n){return function ve(n){let r="",t=new Uint8Array(n),o=t.byteLength;for(var i=0;i<o;i++)r+=String.fromCharCode(t[i]);return btoa(r)}(n).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}(a)),function fe(n,r,t){var o,i;let s,a=!1;return n&&"object"==typeof n?(s=null!==(o=n.bufferSize)&&void 0!==o?o:1/0,r=null!==(i=n.windowTime)&&void 0!==i?i:1/0,a=!!n.refCount,t=n.scheduler):s=null!=n?n:1/0,(0,ge.B)({connector:()=>new me(s,r,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:a})}(1)),this.getAccessToken().subscribe(()=>this.emmitTokenReadyEvent())}emmitTokenReadyEvent(){this.tokenReadySubject.next(!!this.tokenData)}setTokenData(t){var o;return null===t?localStorage.removeItem(S):(!t.refresh_token&&(null===(o=this.tokenData)||void 0===o?void 0:o.refresh_token)&&(t.refresh_token=this.tokenData.refresh_token),t.expires||(t.expires=(new Date).getTime()+1e3*(t.expires_in-10)),localStorage.setItem(S,JSON.stringify(t))),this.tokenData=t,this.emmitTokenReadyEvent(),(0,T.of)(this.tokenData)}refresh(){var t;return(null===(t=this.tokenData)||void 0===t?void 0:t.refresh_token)?this.http.post(z,{client_id:this.configuration.client_id,client_secret:this.configuration.client_secret,grant_type:"refresh_token",refresh_token:this.tokenData.refresh_token}).pipe((0,b.K)(o=>(console.error(o),(0,T.of)(null))),(0,Z.w)(o=>this.setTokenData(o))):(0,T.of)(null)}getAuthorizationLink(){return this.codeChallenge$.pipe((0,_.U)(t=>{const o=R(16);localStorage.setItem(Y,this.codeVerifier),localStorage.setItem($,o);const i=new URL("https://accounts.google.com/o/oauth2/v2/auth");i.searchParams.append("client_id",this.configuration.client_id),i.searchParams.append("redirect_uri",this.configuration.redirect_uri),i.searchParams.append("response_type","code");const s=this.configuration.scopes.join(" ");i.searchParams.append("scope",s),i.searchParams.append("code_challenge",t),i.searchParams.append("code_challenge_method","S256");const a=new URLSearchParams;return a.append("internal_redirect_uri",this.router.url),a.append("security_token",o),i.searchParams.append("state",a.toString()),i.searchParams.append("prompt","consent"),i.searchParams.append("access_type","offline"),i.toString()}))}requestAccessToken(t,o){const i=localStorage.getItem($);return i&&i===o?this.http.post(z,{client_id:this.configuration.client_id,client_secret:this.configuration.client_secret,code:t,code_verifier:localStorage.getItem(Y),grant_type:"authorization_code",redirect_uri:this.configuration.redirect_uri}).pipe((0,b.K)(s=>(console.error(s),(0,T.of)(null))),(0,Z.w)(s=>this.setTokenData(s)),(0,_.U)(s=>!!s)):(0,T.of)(!1)}getAccessToken(){if(this.tokenData){const t=(new Date).getTime();return this.tokenData.expires<t?this.refresh().pipe((0,_.U)(o=>o?o.access_token:null)):(0,T.of)(this.tokenData.access_token)}return(0,T.of)(null)}getAuthorizationHeader(){return this.getAccessToken().pipe((0,_.U)(t=>{var o;return t?`${null===(o=this.tokenData)||void 0===o?void 0:o.token_type} ${t}`:null}))}forceExpires(){if(this.tokenData){const t=Object.assign({},this.tokenData);t.expires=1,this.setTokenData(t)}}deleteToken(){this.setTokenData(null)}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(d.xZ),e.LFG(M.eN),e.LFG(C.F0))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ae=(()=>{class n{constructor(t,o,i){this.tokenService=t,this.route=o,this.router=i,this.errorMessage=null}ngOnInit(){const t=this.route.snapshot.queryParams,o=new URLSearchParams(t.state);t.error?this.errorMessage=t.error:t.code&&this.tokenService.requestAccessToken(t.code,o.get("security_token")).subscribe(i=>{i?this.router.navigateByUrl(o.get("internal_redirect_uri")):this.errorMessage="Unknown Error!!!"})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P),e.Y36(C.gz),e.Y36(C.F0))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-google-authorization-page"]],decls:2,vars:0,template:function(t,o){1&t&&(e.TgZ(0,"p"),e._uU(1,"google-authorization-page works!"),e.qZA())},styles:[""]}),n})();var G=m(2843);function Ge(n,r){if(1&n&&(e.TgZ(0,"a",4),e.TgZ(1,"h4"),e._uU(2),e.qZA(),e.TgZ(3,"small"),e._uU(4),e.qZA(),e.qZA()),2&n){const t=r.$implicit,o=e.oxw(2);e.Q6J("href",t.htmlLink,e.LSH),e.xp6(2),e.Oqu(t.summary),e.xp6(2),e.Oqu(o.displayEventTimeRange(t))}}function Pe(n,r){if(1&n&&(e.TgZ(0,"div",2),e.YNc(1,Ge,5,3,"a",3),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data.items)}}function xe(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Loading..."),e.qZA())}let B=(()=>{class n{constructor(){this.data=null,this.displayEventTimeRange=d.sr}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-google-events-list"]],inputs:{data:"data"},decls:3,vars:2,consts:[["class","cmp-items-list",4,"ngIf","ngIfElse"],["loading",""],[1,"cmp-items-list"],["class","cmp-item","target","_blank",3,"href",4,"ngFor","ngForOf"],["target","_blank",1,"cmp-item",3,"href"]],template:function(t,o){if(1&t&&(e.YNc(0,Pe,2,1,"div",0),e.YNc(1,xe,2,0,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.data)("ngIfElse",i)}},directives:[h.O5,h.sg],styles:[".cmp-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:stretch}.cmp-item[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px}.cmp-item[_ngcontent-%COMP%] > small[_ngcontent-%COMP%]{margin-left:16px}"]}),n})();function H(n,r){var t={};for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&r.indexOf(o)<0&&(t[o]=n[o]);if(null!=n&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(o=Object.getOwnPropertySymbols(n);i<o.length;i++)r.indexOf(o[i])<0&&Object.prototype.propertyIsEnumerable.call(n,o[i])&&(t[o[i]]=n[o[i]])}return t}var u=m(3075);let E=(()=>{class n{constructor(t){this.fb=t,this.onTouched=()=>{},this.subscriptions=[]}ngOnInit(){this.formGroup=this.fb.group({summary:[null,[u.kI.required]],timeRange:this.fb.group({start:this.fb.group({dateTime:[null,[u.kI.required]]}),end:this.fb.group({dateTime:[null,[u.kI.required]]})},{validators:[t=>{var o,i;const s={},a=null===(o=t.get("start.dateTime"))||void 0===o?void 0:o.value,c=null===(i=t.get("end.dateTime"))||void 0===i?void 0:i.value;return!!a&&!!c&&a>=c&&(s.invalidTimeRange=!0),Object.keys(s).length>0?s:null}],updateOn:"blur"})}),this.valueChanges$=this.formGroup.valueChanges.pipe((0,_.U)(t=>{var o,i;const{timeRange:s}=t,a=H(t,["timeRange"]);return a.start=s.start,a.end=s.end,(null===(o=a.start)||void 0===o?void 0:o.dateTime)&&!(a.start.dateTime instanceof Date)&&(a.start.dateTime=new Date(a.start.dateTime)),(null===(i=a.end)||void 0===i?void 0:i.dateTime)&&!(a.end.dateTime instanceof Date)&&(a.end.dateTime=new Date(a.end.dateTime)),a}))}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}writeValue(t){if(t){const{start:o,end:i}=t,s=H(t,["start","end"]);s.timeRange={start:o,end:i},o.dateTime instanceof Date&&(o.dateTime=Q(o.dateTime)),i.dateTime instanceof Date&&(i.dateTime=Q(i.dateTime)),this.formGroup.setValue(s,{emitEvent:!1})}}registerOnChange(t){const o=this.valueChanges$.subscribe(t);this.subscriptions.push(o)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){const o={};return this.formGroup.invalid?(["summary","timeRange","timeRange.start.dateTime","timeRange.end.dateTime"].forEach(i=>{var s;const a=null===(s=this.formGroup.get(i))||void 0===s?void 0:s.errors;if(null!==a){const c=i.split(".");let p=o;for(;c.length>1;){const l=c.shift();p[l]=Object.assign({},p[l]),p=p[l]}p[c[0]]=a}}),o):null}markAsTouched(){this.formGroup.markAllAsTouched()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-google-event-control"]],features:[e._Bn([{provide:u.JU,useExisting:n,multi:!0},{provide:u.Cf,useExisting:n,multi:!0}])],decls:15,vars:1,consts:[[3,"formGroup"],[1,"cmp-label"],["type","text","formControlName","summary",3,"blur"],[1,"cmp-label","cmp-time-rage"],["for","start-datetime",1,"cmp-label-text"],["formGroupName","timeRange",1,"cmp-label-control"],["formGroupName","start"],["id","start-datetime","type","datetime-local","formControlName","dateTime",3,"blur"],["for","end-datetime"],["formGroupName","end"],["id","end-datetime","type","datetime-local","formControlName","dateTime",3,"blur"]],template:function(t,o){1&t&&(e.ynx(0,0),e.TgZ(1,"label",1),e.TgZ(2,"b"),e._uU(3,"Summary"),e.qZA(),e.TgZ(4,"input",2),e.NdJ("blur",function(){return o.onTouched()}),e.qZA(),e.qZA(),e.TgZ(5,"span",3),e.TgZ(6,"label",4),e._uU(7,"Time Range"),e.qZA(),e.TgZ(8,"span",5),e.ynx(9,6),e.TgZ(10,"input",7),e.NdJ("blur",function(){return o.onTouched()}),e.qZA(),e.BQk(),e.TgZ(11,"label",8),e._uU(12,"to"),e.qZA(),e.ynx(13,9),e.TgZ(14,"input",10),e.NdJ("blur",function(){return o.onTouched()}),e.qZA(),e.BQk(),e.qZA(),e.qZA(),e.BQk()),2&t&&e.Q6J("formGroup",o.formGroup)},directives:[u.JL,u.sg,u.Fj,u.JJ,u.u,u.x0],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;grid-row-gap:8px;row-gap:8px}.cmp-label[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]:first-of-type, .cmp-label[_ngcontent-%COMP%] > .cmp-label-text[_ngcontent-%COMP%]{width:15ch}.cmp-time-rage[_ngcontent-%COMP%] > .cmp-label-control[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.cmp-time-rage[_ngcontent-%COMP%] > .cmp-label-control[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-weight:700;flex:1 0 auto;text-align:center}"]}),n})();function ke(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"i",6),e._uU(2,"warning"),e.qZA(),e.TgZ(3,"pre"),e._uU(4),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(t.errorMessage)}}let N=(()=>{class n{constructor(t){this.fb=t,this.value=null,this.valueChange=new e.vpe,this.cancel=new e.vpe,this._errorMessage=null}get errorMessage(){return this._errorMessage}ngOnInit(){this.formGroup=this.fb.group({eventResource:[this.value,[u.kI.required]]})}onSubmit(){var t,o;if(this._errorMessage=null,this.formGroup.updateValueAndValidity(),this.formGroup.invalid){this.formGroup.markAllAsTouched(),this.controlComponent.markAsTouched();const i=null===(t=this.formGroup.get("eventResource"))||void 0===t?void 0:t.errors;this._errorMessage=(null===(o=null==i?void 0:i.timeRange)||void 0===o?void 0:o.invalidTimeRange)?"Start time cannot be greater than end time!!!":"Invalid Form Data!!!"}else this.valueChange.emit(this.formGroup.value.eventResource)}onCancel(){this.cancel.emit()}setErrorMessage(t){this._errorMessage=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-google-event-form"]],viewQuery:function(t,o){if(1&t&&e.Gf(E,5),2&t){let i;e.iGM(i=e.CRH())&&(o.controlComponent=i.first)}},inputs:{value:"value"},outputs:{valueChange:"valueChange",cancel:"cancel"},decls:13,vars:2,consts:[[3,"formGroup","ngSubmit"],["formControlName","eventResource",1,"cmp-form-list"],[1,"cmp-error-message"],[4,"ngIf"],[1,"cmp-actions-panel"],["type","submit",1,"cl-primary"],[1,"material-icons"],["type","button",1,"cl-warn",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e._UZ(1,"app-google-event-control",1),e.TgZ(2,"div",2),e.YNc(3,ke,5,1,"ng-container",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"button",5),e.TgZ(6,"i",6),e._uU(7,"save"),e.qZA(),e._uU(8," Save "),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return o.onCancel()}),e.TgZ(10,"i",6),e._uU(11,"cancel"),e.qZA(),e._uU(12," Cancel "),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",o.formGroup),e.xp6(3),e.Q6J("ngIf",o.errorMessage))},directives:[u._Y,u.JL,u.sg,E,u.JJ,u.u,h.O5],styles:[".cmp-error-message[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;color:red;font-weight:700;height:5em}.cmp-actions-panel[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;grid-column-gap:32px;column-gap:32px}"]}),n})();const W="https://www.googleapis.com/calendar/v3/calendars/primary/events";let ee=(()=>{class n{constructor(t,o){this.tokenService=t,this.http=o}getAll(t){const o=Object.assign({},t);return this.tokenService.getAuthorizationHeader().pipe((0,Z.w)(i=>i?this.http.get(W,{headers:{Authorization:i},params:o}):(0,G._)(d.R_)),(0,b.K)(d.Te),(0,_.U)(i=>(0,d.B2)(i)))}create(t){return this.tokenService.getAuthorizationHeader().pipe((0,Z.w)(o=>o?this.http.post(W,t,{headers:{Authorization:o}}):(0,G._)(d.R_)),(0,b.K)(d.Te),(0,_.U)(o=>(0,d.RC)(o)))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(P),e.LFG(M.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Me=(()=>{class n{constructor(t){this.service=t}ngOnInit(){}onChange(t){this.service.create(t).pipe((0,b.K)(o=>{let i="Server Error!!!";return Array.isArray(o.errors)&&(i=o.errors.map(s=>s.message).join("\n")),this.formComponent.setErrorMessage(i),(0,G._)(()=>o)})).subscribe(o=>{history.back()})}onCancel(){history.back()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ee))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-google-event-create-page"]],viewQuery:function(t,o){if(1&t&&e.Gf(N,5),2&t){let i;e.iGM(i=e.CRH())&&(o.formComponent=i.first)}},decls:1,vars:0,consts:[[3,"valueChange","cancel"]],template:function(t,o){1&t&&(e.TgZ(0,"app-google-event-form",0),e.NdJ("valueChange",function(s){return o.onChange(s)})("cancel",function(){return o.onCancel()}),e.qZA())},directives:[N],styles:[""]}),n})(),Se=(()=>{class n{constructor(t){this.service=t,this.loadSubject=new w.X(void 0)}ngOnInit(){const t=new Date;this.data$=this.loadSubject.asObservable().pipe(D(null,()=>this.service.getAll({singleEvents:!0,orderBy:"startTime",timeMin:t.toISOString()})))}onReload(){this.loadSubject.next()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ee))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-google-events-list-page"]],decls:11,vars:3,consts:[[1,"cmp-actions-panel"],["routerLink","create",1,"cmp-action","cl-primary"],[1,"material-icons"],[1,"cl-filler"],["type","button",1,"cl-primary",3,"click"],[3,"data"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"a",1),e.TgZ(2,"i",2),e._uU(3,"event"),e.qZA(),e._uU(4," Create "),e.qZA(),e._UZ(5,"span",3),e.TgZ(6,"button",4),e.NdJ("click",function(){return o.onReload()}),e.TgZ(7,"i",2),e._uU(8,"refresh"),e.qZA(),e.qZA(),e.qZA(),e._UZ(9,"app-google-events-list",5),e.ALo(10,"async")),2&t&&(e.xp6(9),e.Q6J("data",e.lcZ(10,1,o.data$)))},directives:[C.yS,B],pipes:[h.Ov],styles:[".cmp-actions-panel[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.cmp-actions-panel[_ngcontent-%COMP%] > .cl-filler[_ngcontent-%COMP%]{flex:1 0 auto}"]}),n})();const te="https://people.googleapis.com/v1",qe=`${te}/people/me/connections`,Ee=`${te}/people:createContact`;let ne=(()=>{class n{constructor(t,o){this.tokenService=t,this.http=o}getConnectionsList(t){const o=Object.assign({},t);return this.tokenService.getAuthorizationHeader().pipe((0,Z.w)(i=>i?this.http.get(qe,{headers:{Authorization:i},params:o}):(0,G._)(d.R_)),(0,b.K)(d.Te),(0,_.U)(i=>(0,d.jV)(i)))}createContact(t,o){return this.tokenService.getAuthorizationHeader().pipe((0,Z.w)(i=>i?this.http.post(Ee,t,{headers:{Authorization:i},params:o}):(0,G._)(d.R_)),(0,b.K)(d.Te),(0,_.U)(i=>(0,d.zG)(i)))}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(P),e.LFG(M.eN))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Ne(n,r){if(1&n&&(e.TgZ(0,"div",4),e._UZ(1,"img",5),e.TgZ(2,"div",6),e.TgZ(3,"h4"),e._uU(4),e.qZA(),e.TgZ(5,"small",7),e.TgZ(6,"b"),e._uU(7,"Phone"),e.qZA(),e.TgZ(8,"a",8),e._uU(9),e.qZA(),e.qZA(),e.TgZ(10,"small",7),e.TgZ(11,"b"),e._uU(12,"Email"),e.qZA(),e.TgZ(13,"a",9),e._uU(14),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&n){const t=r.$implicit,o=e.oxw(2);e.xp6(1),e.Q6J("src",o.urlPhotos(t.photos),e.LSH),e.xp6(3),e.Oqu(o.displayName(t.names)),e.xp6(4),e.Q6J("href","tel:"+o.displayPhoneNumber(t.phoneNumbers),e.LSH),e.xp6(1),e.Oqu(o.displayPhoneNumber(t.phoneNumbers)),e.xp6(4),e.Q6J("href","mailto:"+o.displayEmailAddress(t.emailAddresses),e.LSH),e.xp6(1),e.Oqu(o.displayEmailAddress(t.emailAddresses))}}function Ue(n,r){if(1&n&&(e.TgZ(0,"div",2),e.YNc(1,Ne,15,6,"div",3),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.data.connections)}}function Fe(n,r){1&n&&(e.TgZ(0,"div"),e._uU(1,"Loading..."),e.qZA())}let oe=(()=>{class n{constructor(){this.data=null,this.displayName=d.ss,this.displayPhoneNumber=d.WJ,this.displayEmailAddress=d.Nb,this.urlPhotos=d.Hi}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-google-connections-list"]],inputs:{data:"data"},decls:3,vars:2,consts:[["class","cmp-items-list",4,"ngIf","ngIfElse"],["loading",""],[1,"cmp-items-list"],["class","cmp-item",4,"ngFor","ngForOf"],[1,"cmp-item"],[1,"cmp-item-photo",3,"src"],[1,"cmp-item-details"],[1,"cmp-label"],[1,"cl-number",3,"href"],["target","_blank",3,"href"]],template:function(t,o){if(1&t&&(e.YNc(0,Ue,2,1,"div",0),e.YNc(1,Fe,2,0,"ng-template",null,1,e.W1O)),2&t){const i=e.MAs(2);e.Q6J("ngIf",o.data)("ngIfElse",i)}},directives:[h.O5,h.sg],styles:[".cmp-item[_ngcontent-%COMP%]{display:flex;flex-direction:row;cursor:auto}.cmp-item[_ngcontent-%COMP%] > .cmp-item-photo[_ngcontent-%COMP%]{width:64px}.cmp-item[_ngcontent-%COMP%] > .cmp-item-details[_ngcontent-%COMP%]{flex:1 0 auto;display:flex;flex-direction:column;margin-left:16px}.cmp-item[_ngcontent-%COMP%] > .cmp-item-details[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{margin-top:0;margin-bottom:8px}.cmp-item[_ngcontent-%COMP%] > .cmp-item-details[_ngcontent-%COMP%] > .cmp-label[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]:first-of-type{width:10ch}.cmp-item[_ngcontent-%COMP%] > .cmp-item-details[_ngcontent-%COMP%] > .cmp-label[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{color:inherit;text-decoration:none}.cmp-item[_ngcontent-%COMP%] > .cmp-item-details[_ngcontent-%COMP%] > .cmp-label[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{text-shadow:0px 0px 2px}"]}),n})(),je=(()=>{class n{constructor(t){this.service=t,this.loadSubject=new w.X(void 0)}ngOnInit(){this.data$=this.loadSubject.asObservable().pipe(D(null,()=>this.service.getConnectionsList({personFields:"names,emailAddresses,phoneNumbers,photos",sortOrder:"FIRST_NAME_ASCENDING",pageSize:1e3})))}onReload(){this.loadSubject.next()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ne))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-google-connections-list-page"]],decls:15,vars:3,consts:[[1,"cmp-actions-panel"],["routerLink","create-contact",1,"cmp-action","cl-primary"],[1,"material-icons"],["href","https://contacts.google.com/","target","_blank",1,"cmp-action","cl-primary"],[1,"cl-filler"],["type","button",1,"cl-primary",3,"click"],[3,"data"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"a",1),e.TgZ(2,"i",2),e._uU(3,"people"),e.qZA(),e._uU(4," Create "),e.qZA(),e.TgZ(5,"a",3),e.TgZ(6,"i",2),e._uU(7,"launch"),e.qZA(),e._uU(8," Web "),e.qZA(),e._UZ(9,"span",4),e.TgZ(10,"button",5),e.NdJ("click",function(){return o.onReload()}),e.TgZ(11,"i",2),e._uU(12,"refresh"),e.qZA(),e.qZA(),e.qZA(),e._UZ(13,"app-google-connections-list",6),e.ALo(14,"async")),2&t&&(e.xp6(13),e.Q6J("data",e.lcZ(14,1,o.data$)))},directives:[C.yS,oe],pipes:[h.Ov],styles:[".cmp-actions-panel[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;grid-column-gap:8px;column-gap:8px}.cmp-actions-panel[_ngcontent-%COMP%] > .cl-filler[_ngcontent-%COMP%]{flex:1 0 auto}"]}),n})();function Le(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"label",3),e.TgZ(2,"b"),e._uU(3,"Phone "),e.TgZ(4,"span",12),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"input",13),e.NdJ("blur",function(){return e.CHM(t),e.oxw().onTouched()}),e.qZA(),e.TgZ(7,"button",14),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw().removePhoneNumber(s)}),e.TgZ(8,"i",8),e._uU(9,"delete_forever"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=r.index;e.Q6J("formGroupName",t),e.xp6(5),e.Oqu(t+1)}}function Ie(n,r){if(1&n){const t=e.EpF();e.TgZ(0,"div",11),e.TgZ(1,"label",3),e.TgZ(2,"b"),e._uU(3,"Email "),e.TgZ(4,"span",12),e._uU(5),e.qZA(),e.qZA(),e.TgZ(6,"input",15),e.NdJ("blur",function(){return e.CHM(t),e.oxw().onTouched()}),e.qZA(),e.TgZ(7,"button",14),e.NdJ("click",function(){const s=e.CHM(t).index;return e.oxw().removeEmailAddress(s)}),e.TgZ(8,"i",8),e._uU(9,"delete_forever"),e.qZA(),e.qZA(),e.qZA(),e.qZA()}if(2&n){const t=r.index;e.Q6J("formGroupName",t),e.xp6(5),e.Oqu(t+1)}}let U=(()=>{class n{constructor(t){this.fb=t,this.value=null,this.creteName=o=>this.fb.group({givenName:[(null==o?void 0:o.givenName)||null,[u.kI.required]],familyName:[(null==o?void 0:o.familyName)||null]}),this.createEmailAddress=o=>this.fb.group({value:[(null==o?void 0:o.value)||null,[u.kI.required]]}),this.createPhoneNumber=o=>this.fb.group({value:[(null==o?void 0:o.value)||null,[u.kI.required]]}),this.onTouched=()=>{},this.subscriptions=[]}ngOnInit(){var t,o,i;this.formGroup=this.fb.group({names:this.fb.array(((null===(t=this.value)||void 0===t?void 0:t.names)||[null]).map(this.creteName),{validators:[u.kI.required]}),emailAddresses:this.fb.array(((null===(o=this.value)||void 0===o?void 0:o.emailAddresses)||[]).map(this.createEmailAddress)),phoneNumbers:this.fb.array(((null===(i=this.value)||void 0===i?void 0:i.phoneNumbers)||[]).map(this.createPhoneNumber))}),this.valueChanges$=this.formGroup.valueChanges}ngOnDestroy(){this.subscriptions.forEach(t=>t.unsubscribe())}writeValue(t){t&&this.formGroup.setValue(t)}registerOnChange(t){const o=this.valueChanges$.subscribe(t);this.subscriptions.push(o)}registerOnTouched(t){this.onTouched=t}setDisabledState(t){t?this.formGroup.disable():this.formGroup.enable()}validate(t){const o={};return this.formGroup.invalid?(["names.givenName","names.familyName","phoneNumbers.value","emailAddresses.value"].forEach(i=>{const s=i.split(".",2),a=s[0],c=s[1],p=this[a];if(!o[a]){const l=p.errors;l&&(o[a]=l)}p.controls.forEach((l,f)=>{var v,g,y,A,x;const re=l.errors;re&&(o[a]=Object.assign(Object.assign({},o[a]),{[f]:Object.assign(Object.assign({},null===(v=o[a])||void 0===v?void 0:v[f]),re)}));const ie=null===(g=l.get(c))||void 0===g?void 0:g.errors;ie&&(o[a]=Object.assign(Object.assign({},o[a]),{[f]:Object.assign(Object.assign({},null===(y=o[a])||void 0===y?void 0:y[f]),{[c]:Object.assign(Object.assign({},null===(x=null===(A=o[a])||void 0===A?void 0:A[f])||void 0===x?void 0:x[c]),ie)})}))})}),o):null}get names(){return this.formGroup.get("names")}get emailAddresses(){return this.formGroup.get("emailAddresses")}get phoneNumbers(){return this.formGroup.get("phoneNumbers")}addEmailAddress(){this.emailAddresses.push(this.createEmailAddress(null))}removeEmailAddress(t){this.emailAddresses.removeAt(t)}addPhoneNumber(){this.phoneNumbers.push(this.createPhoneNumber(null))}removePhoneNumber(t){this.phoneNumbers.removeAt(t)}markAsTouched(){this.formGroup.markAllAsTouched()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-google-person-control"]],inputs:{value:"value"},features:[e._Bn([{provide:u.JU,useExisting:n,multi:!0},{provide:u.Cf,useExisting:n,multi:!0}])],decls:24,vars:3,consts:[[3,"formGroup"],["formArrayName","names"],["formGroupName","0",1,"cmp-form-list"],[1,"cmp-label"],["type","text","formControlName","givenName",3,"blur"],["type","text","formControlName","familyName",3,"blur"],["formArrayName","phoneNumbers"],["type","button",1,"cl-primary",3,"click"],[1,"material-icons"],["class","cmp-form-list",3,"formGroupName",4,"ngFor","ngForOf"],["formArrayName","emailAddresses"],[1,"cmp-form-list",3,"formGroupName"],[1,"cl-number","cl-filler"],["type","text","formControlName","value","pattern","[0-9]{8,}",3,"blur"],["type","button",1,"cl-warn",3,"click"],["type","email","formControlName","value","email","",3,"blur"]],template:function(t,o){1&t&&(e.ynx(0,0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"label",3),e.TgZ(4,"b"),e._uU(5,"Name"),e.qZA(),e.TgZ(6,"input",4),e.NdJ("blur",function(){return o.onTouched()}),e.qZA(),e.qZA(),e.TgZ(7,"label",3),e.TgZ(8,"b"),e._uU(9,"Family Name"),e.qZA(),e.TgZ(10,"input",5),e.NdJ("blur",function(){return o.onTouched()}),e.qZA(),e.qZA(),e._UZ(11,"hr"),e.qZA(),e.qZA(),e.TgZ(12,"div",6),e.TgZ(13,"button",7),e.NdJ("click",function(){return o.addPhoneNumber()}),e.TgZ(14,"i",8),e._uU(15,"phone"),e.qZA(),e._uU(16," Add "),e.qZA(),e.YNc(17,Le,10,2,"div",9),e.qZA(),e.TgZ(18,"div",10),e.TgZ(19,"button",7),e.NdJ("click",function(){return o.addEmailAddress()}),e.TgZ(20,"i",8),e._uU(21,"email"),e.qZA(),e._uU(22," Add "),e.qZA(),e.YNc(23,Ie,10,2,"div",9),e.qZA(),e.BQk()),2&t&&(e.Q6J("formGroup",o.formGroup),e.xp6(17),e.Q6J("ngForOf",o.phoneNumbers.controls),e.xp6(6),e.Q6J("ngForOf",o.emailAddresses.controls))},directives:[u.JL,u.sg,u.CE,u.x0,u.Fj,u.JJ,u.u,h.sg,u.c5,u.on],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;grid-row-gap:8px;row-gap:8px}.cmp-form-list[_ngcontent-%COMP%] > hr[_ngcontent-%COMP%]{width:100%}.cmp-label[_ngcontent-%COMP%] > b[_ngcontent-%COMP%]:first-of-type, .cmp-label[_ngcontent-%COMP%] > .cmp-label-text[_ngcontent-%COMP%]{width:15ch}.cmp-form-group-title[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.cmp-form-group-title[_ngcontent-%COMP%]   .cmp-name-no[_ngcontent-%COMP%]{width:4ch}.cmp-form-group-title[_ngcontent-%COMP%] > h4[_ngcontent-%COMP%]{margin-bottom:8px}.cmp-form-group-title[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{margin-left:auto}"]}),n})();function Je(n,r){if(1&n&&(e.ynx(0),e.TgZ(1,"i",6),e._uU(2,"warning"),e.qZA(),e.TgZ(3,"pre"),e._uU(4),e.qZA(),e.BQk()),2&n){const t=e.oxw();e.xp6(4),e.Oqu(t.errorMessage)}}let F=(()=>{class n{constructor(t){this.fb=t,this.value=null,this.valueChange=new e.vpe,this.cancel=new e.vpe,this._errorMessage=null}get errorMessage(){return this._errorMessage}ngOnInit(){this.formGroup=this.fb.group({person:[this.value||null,[u.kI.required]]})}onSubmit(){this._errorMessage=null,this.formGroup.updateValueAndValidity(),this.formGroup.invalid?(this.formGroup.markAllAsTouched(),this.controlComponent.markAsTouched(),this._errorMessage="Invalid Form Data!!!"):this.valueChange.emit(this.formGroup.value.person)}onCancel(){this.cancel.emit()}setErrorMessage(t){this._errorMessage=t}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-google-person-form"]],viewQuery:function(t,o){if(1&t&&e.Gf(U,5),2&t){let i;e.iGM(i=e.CRH())&&(o.controlComponent=i.first)}},inputs:{value:"value"},outputs:{valueChange:"valueChange",cancel:"cancel"},decls:13,vars:2,consts:[[3,"formGroup","ngSubmit"],["formControlName","person",1,"cmp-form-list"],[1,"cmp-error-message"],[4,"ngIf"],[1,"cmp-actions-panel"],["type","submit",1,"cl-primary"],[1,"material-icons"],["type","button",1,"cl-warn",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.onSubmit()}),e._UZ(1,"app-google-person-control",1),e.TgZ(2,"div",2),e.YNc(3,Je,5,1,"ng-container",3),e.qZA(),e.TgZ(4,"div",4),e.TgZ(5,"button",5),e.TgZ(6,"i",6),e._uU(7,"save"),e.qZA(),e._uU(8," Save "),e.qZA(),e.TgZ(9,"button",7),e.NdJ("click",function(){return o.onCancel()}),e.TgZ(10,"i",6),e._uU(11,"cancel"),e.qZA(),e._uU(12," Cancel "),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.Q6J("formGroup",o.formGroup),e.xp6(3),e.Q6J("ngIf",o.errorMessage))},directives:[u._Y,u.JL,u.sg,U,u.JJ,u.u,h.O5],styles:[".cmp-error-message[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;color:red;font-weight:700;height:5em}.cmp-actions-panel[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;grid-column-gap:32px;column-gap:32px}"]}),n})(),Re=(()=>{class n{constructor(t){this.service=t}ngOnInit(){}onChange(t){this.service.createContact(t,{personFields:"names,phoneNumbers,emailAddresses"}).pipe((0,b.K)(o=>{let i="Server Error!!!";return Array.isArray(o.errors)&&(i=o.errors.map(s=>s.message).join("\n")),this.formComponent.setErrorMessage(i),(0,G._)(()=>o)})).subscribe(o=>{history.back()})}onCancel(){history.back()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(ne))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-google-contact-create-page"]],viewQuery:function(t,o){if(1&t&&e.Gf(F,5),2&t){let i;e.iGM(i=e.CRH())&&(o.formComponent=i.first)}},decls:1,vars:0,consts:[[3,"valueChange","cancel"]],template:function(t,o){1&t&&(e.TgZ(0,"app-google-person-form",0),e.NdJ("valueChange",function(s){return o.onChange(s)})("cancel",function(){return o.onCancel()}),e.qZA())},directives:[F],styles:[""]}),n})(),Qe=(()=>{class n{constructor(t){this.tokenService=t}ngOnInit(){}forceExpires(){this.tokenService.forceExpires()}deleteToken(){this.tokenService.deleteToken()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-google-token-management-page"]],decls:9,vars:0,consts:[[1,"cmp-container"],["type","button",3,"click"],[1,"material-icons"],["type","button",1,"cl-warn",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"button",1),e.NdJ("click",function(){return o.forceExpires()}),e.TgZ(2,"i",2),e._uU(3,"auto_delete"),e.qZA(),e._uU(4," Force Token Expires "),e.qZA(),e.TgZ(5,"button",3),e.NdJ("click",function(){return o.deleteToken()}),e.TgZ(6,"i",2),e._uU(7,"delete_forever"),e.qZA(),e._uU(8," Delete Token "),e.qZA(),e.qZA())},styles:[".cmp-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;margin-top:64px;grid-row-gap:16px;row-gap:16px}"]}),n})();function De(n,r){if(1&n&&(e.TgZ(0,"div"),e.TgZ(1,"a",8),e.ALo(2,"async"),e.TgZ(3,"i",9),e._uU(4,"login"),e.qZA(),e._uU(5," Login Google "),e.qZA(),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("href",e.lcZ(2,1,t.authorizationLink$),e.LSH)}}function Ye(n,r){1&n&&e._UZ(0,"router-outlet")}const $e=[{path:"authorization",component:Ae},{path:"",component:(()=>{class n{constructor(t){this.tokenService=t}ngOnInit(){this.tokenReady$=this.tokenService.tokenReady$,this.authorizationLink$=this.tokenService.getAuthorizationLink()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(P))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-google"]],decls:18,vars:5,consts:[[1,"cmp-title"],[1,"cmp-label"],[1,"cmp-nav"],["routerLink","./events"],["routerLink","./people"],["routerLink","./token"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"cmp-action","cl-primary",3,"href"],[1,"material-icons"]],template:function(t,o){1&t&&(e.TgZ(0,"header",0),e.TgZ(1,"h2",1),e._uU(2,"Google"),e.qZA(),e.TgZ(3,"nav",2),e.TgZ(4,"ul"),e.TgZ(5,"li"),e.TgZ(6,"a",3),e._uU(7,"Events"),e.qZA(),e.qZA(),e.TgZ(8,"li"),e.TgZ(9,"a",4),e._uU(10,"People"),e.qZA(),e.qZA(),e.TgZ(11,"li"),e.TgZ(12,"a",5),e._uU(13,"Token"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.ynx(14,6),e.ALo(15,"async"),e.YNc(16,De,6,3,"div",7),e.YNc(17,Ye,1,0,"router-outlet",7),e.BQk()),2&t&&(e.xp6(14),e.Q6J("ngSwitch",e.lcZ(15,3,o.tokenReady$)),e.xp6(2),e.Q6J("ngSwitchCase",!1),e.xp6(1),e.Q6J("ngSwitchCase",!0))},directives:[C.yS,h.RF,h.n9,C.lC],pipes:[h.Ov],styles:[""]}),n})(),children:[{path:"",redirectTo:"events",pathMatch:"full"},{path:"events",component:Se},{path:"events/create",component:Me},{path:"people",component:je},{path:"people/create-contact",component:Re},{path:"token",component:Qe}]}];let ze=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[C.Bz.forChild($e)],C.Bz]}),n})(),Be=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[h.ez,u.UX]]}),n})(),Xe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[h.ez,ze,Be]]}),n})()}}]);